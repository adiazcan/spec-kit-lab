var It=e=>{throw TypeError(e)};var De=(e,t,r)=>t.has(e)||It("Cannot "+r);var o=(e,t,r)=>(De(e,t,"read from private field"),r?r.call(e):t.get(e)),F=(e,t,r)=>t.has(e)?It("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),E=(e,t,r,n)=>(De(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),S=(e,t,r)=>(De(e,t,"access private method"),r);import{S as zt,p as Nt,r as D,s as Re,a as pe,n as Pe,i as He,b as Rt,t as Wr,c as Ie,f as $r,d as Qr,e as Pt,g as je,h as At,j as Hr,k as b,l as it,u as Te,m as h,L as Gr,R as B,o as Kr}from"./index-CmFz0A4c.js";var j,g,Se,R,X,ue,W,V,Ce,ce,le,Z,ee,z,de,w,be,Ge,Ke,Ve,ze,qe,Ye,Je,qt,Kt,Vr=(Kt=class extends zt{constructor(t,r){super();F(this,w);F(this,j);F(this,g);F(this,Se);F(this,R);F(this,X);F(this,ue);F(this,W);F(this,V);F(this,Ce);F(this,ce);F(this,le);F(this,Z);F(this,ee);F(this,z);F(this,de,new Set);this.options=r,E(this,j,t),E(this,V,null),E(this,W,Nt()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(o(this,g).addObserver(this),jt(o(this,g),this.options)?S(this,w,be).call(this):this.updateResult(),S(this,w,ze).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xe(o(this,g),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xe(o(this,g),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,S(this,w,qe).call(this),S(this,w,Ye).call(this),o(this,g).removeObserver(this)}setOptions(t){const r=this.options,n=o(this,g);if(this.options=o(this,j).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof D(this.options.enabled,o(this,g))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");S(this,w,Je).call(this),o(this,g).setOptions(this.options),r._defaulted&&!Re(this.options,r)&&o(this,j).getQueryCache().notify({type:"observerOptionsUpdated",query:o(this,g),observer:this});const a=this.hasListeners();a&&Tt(o(this,g),n,this.options,r)&&S(this,w,be).call(this),this.updateResult(),a&&(o(this,g)!==n||D(this.options.enabled,o(this,g))!==D(r.enabled,o(this,g))||pe(this.options.staleTime,o(this,g))!==pe(r.staleTime,o(this,g)))&&S(this,w,Ge).call(this);const s=S(this,w,Ke).call(this);a&&(o(this,g)!==n||D(this.options.enabled,o(this,g))!==D(r.enabled,o(this,g))||s!==o(this,z))&&S(this,w,Ve).call(this,s)}getOptimisticResult(t){const r=o(this,j).getQueryCache().build(o(this,j),t),n=this.createResult(r,t);return qr(this,n)&&(E(this,R,n),E(this,ue,this.options),E(this,X,o(this,g).state)),n}getCurrentResult(){return o(this,R)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&o(this,W).status==="pending"&&o(this,W).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){o(this,de).add(t)}getCurrentQuery(){return o(this,g)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=o(this,j).defaultQueryOptions(t),n=o(this,j).getQueryCache().build(o(this,j),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return S(this,w,be).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),o(this,R)))}createResult(t,r){var Oe;const n=o(this,g),a=this.options,s=o(this,R),i=o(this,X),u=o(this,ue),d=t!==n?t.state:o(this,Se),{state:m}=t;let c={...m},l=!1,f;if(r._optimisticResults){const P=this.hasListeners(),G=!P&&jt(t,r),K=P&&Tt(t,n,r,a);(G||K)&&(c={...c,...Qr(m.data,t.options)}),r._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:p,errorUpdatedAt:y,status:x}=c;f=c.data;let I=!1;if(r.placeholderData!==void 0&&f===void 0&&x==="pending"){let P;s!=null&&s.isPlaceholderData&&r.placeholderData===(u==null?void 0:u.placeholderData)?(P=s.data,I=!0):P=typeof r.placeholderData=="function"?r.placeholderData((Oe=o(this,le))==null?void 0:Oe.state.data,o(this,le)):r.placeholderData,P!==void 0&&(x="success",f=Pt(s==null?void 0:s.data,P,r),l=!0)}if(r.select&&f!==void 0&&!I)if(s&&f===(i==null?void 0:i.data)&&r.select===o(this,Ce))f=o(this,ce);else try{E(this,Ce,r.select),f=r.select(f),f=Pt(s==null?void 0:s.data,f,r),E(this,ce,f),E(this,V,null)}catch(P){E(this,V,P)}o(this,V)&&(p=o(this,V),f=o(this,ce),y=Date.now(),x="error");const C=c.fetchStatus==="fetching",O=x==="pending",N=x==="error",k=O&&C,L=f!==void 0,M={status:x,fetchStatus:c.fetchStatus,isPending:O,isSuccess:x==="success",isError:N,isInitialLoading:k,isLoading:k,data:f,dataUpdatedAt:c.dataUpdatedAt,error:p,errorUpdatedAt:y,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>d.dataUpdateCount||c.errorUpdateCount>d.errorUpdateCount,isFetching:C,isRefetching:C&&!O,isLoadingError:N&&!L,isPaused:c.fetchStatus==="paused",isPlaceholderData:l,isRefetchError:N&&L,isStale:ot(t,r),refetch:this.refetch,promise:o(this,W),isEnabled:D(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=M.data!==void 0,G=M.status==="error"&&!P,K=Y=>{G?Y.reject(M.error):P&&Y.resolve(M.data)},ve=()=>{const Y=E(this,W,M.promise=Nt());K(Y)},ne=o(this,W);switch(ne.status){case"pending":t.queryHash===n.queryHash&&K(ne);break;case"fulfilled":(G||M.data!==ne.value)&&ve();break;case"rejected":(!G||M.error!==ne.reason)&&ve();break}}return M}updateResult(){const t=o(this,R),r=this.createResult(o(this,g),this.options);if(E(this,X,o(this,g).state),E(this,ue,this.options),o(this,X).data!==void 0&&E(this,le,o(this,g)),Re(r,t))return;E(this,R,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!o(this,de).size)return!0;const i=new Set(s??o(this,de));return this.options.throwOnError&&i.add("error"),Object.keys(o(this,R)).some(u=>{const v=u;return o(this,R)[v]!==t[v]&&i.has(v)})};S(this,w,qt).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&S(this,w,ze).call(this)}},j=new WeakMap,g=new WeakMap,Se=new WeakMap,R=new WeakMap,X=new WeakMap,ue=new WeakMap,W=new WeakMap,V=new WeakMap,Ce=new WeakMap,ce=new WeakMap,le=new WeakMap,Z=new WeakMap,ee=new WeakMap,z=new WeakMap,de=new WeakMap,w=new WeakSet,be=function(t){S(this,w,Je).call(this);let r=o(this,g).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Pe)),r},Ge=function(){S(this,w,qe).call(this);const t=pe(this.options.staleTime,o(this,g));if(He||o(this,R).isStale||!Rt(t))return;const n=Wr(o(this,R).dataUpdatedAt,t)+1;E(this,Z,Ie.setTimeout(()=>{o(this,R).isStale||this.updateResult()},n))},Ke=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(o(this,g)):this.options.refetchInterval)??!1},Ve=function(t){S(this,w,Ye).call(this),E(this,z,t),!(He||D(this.options.enabled,o(this,g))===!1||!Rt(o(this,z))||o(this,z)===0)&&E(this,ee,Ie.setInterval(()=>{(this.options.refetchIntervalInBackground||$r.isFocused())&&S(this,w,be).call(this)},o(this,z)))},ze=function(){S(this,w,Ge).call(this),S(this,w,Ve).call(this,S(this,w,Ke).call(this))},qe=function(){o(this,Z)&&(Ie.clearTimeout(o(this,Z)),E(this,Z,void 0))},Ye=function(){o(this,ee)&&(Ie.clearInterval(o(this,ee)),E(this,ee,void 0))},Je=function(){const t=o(this,j).getQueryCache().build(o(this,j),this.options);if(t===o(this,g))return;const r=o(this,g);E(this,g,t),E(this,Se,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},qt=function(t){je.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(o(this,R))}),o(this,j).getQueryCache().notify({query:o(this,g),type:"observerResultsUpdated"})})},Kt);function zr(e,t){return D(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function jt(e,t){return zr(e,t)||e.state.data!==void 0&&Xe(e,t,t.refetchOnMount)}function Xe(e,t,r){if(D(t.enabled,e)!==!1&&pe(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&ot(e,t)}return!1}function Tt(e,t,r,n){return(e!==t||D(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ot(e,r)}function ot(e,t){return D(t.enabled,e)!==!1&&e.isStaleByTime(pe(t.staleTime,e))}function qr(e,t){return!Re(e.getCurrentResult(),t)}var $,q,T,Q,H,Ne,Ze,Vt,Yr=(Vt=class extends zt{constructor(t,r){super();F(this,H);F(this,$);F(this,q);F(this,T);F(this,Q);E(this,$,t),this.setOptions(r),this.bindMethods(),S(this,H,Ne).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var n;const r=this.options;this.options=o(this,$).defaultMutationOptions(t),Re(this.options,r)||o(this,$).getMutationCache().notify({type:"observerOptionsUpdated",mutation:o(this,T),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&At(r.mutationKey)!==At(this.options.mutationKey)?this.reset():((n=o(this,T))==null?void 0:n.state.status)==="pending"&&o(this,T).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=o(this,T))==null||t.removeObserver(this)}onMutationUpdate(t){S(this,H,Ne).call(this),S(this,H,Ze).call(this,t)}getCurrentResult(){return o(this,q)}reset(){var t;(t=o(this,T))==null||t.removeObserver(this),E(this,T,void 0),S(this,H,Ne).call(this),S(this,H,Ze).call(this)}mutate(t,r){var n;return E(this,Q,r),(n=o(this,T))==null||n.removeObserver(this),E(this,T,o(this,$).getMutationCache().build(o(this,$),this.options)),o(this,T).addObserver(this),o(this,T).execute(t)}},$=new WeakMap,q=new WeakMap,T=new WeakMap,Q=new WeakMap,H=new WeakSet,Ne=function(){var r;const t=((r=o(this,T))==null?void 0:r.state)??Hr();E(this,q,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Ze=function(t){je.batch(()=>{var r,n,a,s,i,u,v,d;if(o(this,Q)&&this.hasListeners()){const m=o(this,q).variables,c=o(this,q).context,l={client:o(this,$),meta:this.options.meta,mutationKey:this.options.mutationKey};if((t==null?void 0:t.type)==="success"){try{(n=(r=o(this,Q)).onSuccess)==null||n.call(r,t.data,m,c,l)}catch(f){Promise.reject(f)}try{(s=(a=o(this,Q)).onSettled)==null||s.call(a,t.data,null,m,c,l)}catch(f){Promise.reject(f)}}else if((t==null?void 0:t.type)==="error"){try{(u=(i=o(this,Q)).onError)==null||u.call(i,t.error,m,c,l)}catch(f){Promise.reject(f)}try{(d=(v=o(this,Q)).onSettled)==null||d.call(v,void 0,t.error,m,c,l)}catch(f){Promise.reject(f)}}}this.listeners.forEach(m=>{m(o(this,q))})})},Vt),Yt=b.createContext(!1),Jr=()=>b.useContext(Yt);Yt.Provider;function Xr(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Zr=b.createContext(Xr()),en=()=>b.useContext(Zr),tn=(e,t,r)=>{const n=r!=null&&r.state.error&&typeof e.throwOnError=="function"?it(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},rn=e=>{b.useEffect(()=>{e.clearReset()},[e])},nn=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||it(r,[e.error,n])),an=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},sn=(e,t)=>e.isLoading&&e.isFetching&&!t,on=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,kt=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function un(e,t,r){var l,f,p,y;const n=Jr(),a=en(),s=Te(),i=s.defaultQueryOptions(e);(f=(l=s.getDefaultOptions().queries)==null?void 0:l._experimental_beforeQuery)==null||f.call(l,i);const u=s.getQueryCache().get(i.queryHash);i._optimisticResults=n?"isRestoring":"optimistic",an(i),tn(i,a,u),rn(a);const v=!s.getQueryCache().get(i.queryHash),[d]=b.useState(()=>new t(s,i)),m=d.getOptimisticResult(i),c=!n&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(x=>{const I=c?d.subscribe(je.batchCalls(x)):Pe;return d.updateResult(),I},[d,c]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),b.useEffect(()=>{d.setOptions(i)},[i,d]),on(i,m))throw kt(i,d,a);if(nn({result:m,errorResetBoundary:a,throwOnError:i.throwOnError,query:u,suspense:i.suspense}))throw m.error;if((y=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,i,m),i.experimental_prefetchInRender&&!He&&sn(m,n)){const x=v?kt(i,d,a):u==null?void 0:u.promise;x==null||x.catch(Pe).finally(()=>{d.updateResult()})}return i.notifyOnChangeProps?m:d.trackResult(m)}function cn(e,t){return un(e,Vr)}function Jt(e,t){const r=Te(),[n]=b.useState(()=>new Yr(r,e));b.useEffect(()=>{n.setOptions(e)},[n,e]);const a=b.useSyncExternalStore(b.useCallback(i=>n.subscribe(je.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=b.useCallback((i,u)=>{n.mutate(i,u).catch(Pe)},[n]);if(a.error&&it(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const _e="http://localhost:5000";function Le(){return localStorage.getItem("authToken")||""}const ut={adventures:{list:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search);const r=`${_e}/api/Adventures${t.toString()?`?${t}`:""}`,n=await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${Le()}`,"Content-Type":"application/json"}});if(!n.ok)throw n;return(await n.json()).adventures||[]},create:async e=>{const t=await fetch(`${_e}/api/Adventures`,{method:"POST",headers:{Authorization:`Bearer ${Le()}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw t;return await t.json()},delete:async e=>{const t=await fetch(`${_e}/api/Adventures/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${Le()}`}});if(!t.ok)throw t}}},ln={400:"Invalid request. Please check your input.",401:"Authentication required. Please log in.",403:"Access denied. You do not have permission.",404:"Adventure not found.",409:"An adventure with this name already exists.",500:"Something went wrong. Please try again later.",503:"Service temporarily unavailable. Please try again later."};function Mt(e){return ln[e]||"An unexpected error occurred. Please try again."}async function ct(e){var t;if(e instanceof Response)try{return((t=(await e.json()).error)==null?void 0:t.message)||Mt(e.status)}catch{return Mt(e.status)}return e instanceof Error?e.message.includes("Failed to fetch")||e.message.includes("NetworkError")?"Unable to connect. Check your internet connection.":e.message:"An unexpected error occurred. Please try again."}function dn(){return cn({queryKey:["adventures"],queryFn:()=>ut.adventures.list(),staleTime:5*60*1e3,gcTime:10*60*1e3})}function fn(){const e=Te();return Jt({mutationFn:t=>ut.adventures.create(t),onSuccess:t=>{e.setQueryData(["adventures"],(r=[])=>[...r,t])},onError:async t=>{const r=await ct(t);console.error("Failed to create adventure:",r)}})}function hn(){const e=Te();return Jt({mutationFn:t=>ut.adventures.delete(t),onSuccess:(t,r)=>{e.setQueryData(["adventures"],(n=[])=>n.filter(a=>a.id!==r))},onError:async t=>{const r=await ct(t);console.error("Failed to delete adventure:",r)}})}function Dt(e){if(!e)return"N/A";try{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}catch{return"Invalid date"}}function _t(e){return e==null?"0%":`${Math.round(e)}%`}function vn({adventure:e,isLoading:t=!1,onSelect:r,onDelete:n}){var u;const a=e.name||`Adventure ${((u=e.id)==null?void 0:u.substring(0,8))||"Unknown"}`,s=e.progress??0,i=e.lastPlayedAt||e.lastUpdatedAt;return h.jsxs("article",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow focus-within:ring-2 focus-within:ring-blue-500 cursor-pointer",onClick:()=>r(e),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),r(e))},tabIndex:0,role:"button","aria-label":`Select adventure: ${a}`,children:[h.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:a}),h.jsxs("time",{dateTime:e.createdAt,className:"text-sm text-gray-600 block mb-4",children:["Created: ",Dt(e.createdAt)]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),h.jsx("span",{className:"text-sm text-gray-600",children:_t(s)})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:h.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all",style:{width:`${s}%`},role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Progress: ${_t(s)}`})})]}),i&&h.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Last played: ",Dt(i)]}),h.jsx("div",{className:"flex items-center gap-2 mt-4",children:h.jsx("button",{onClick:v=>{v.stopPropagation(),n(e.id||"")},disabled:t,"aria-label":`Delete adventure: ${a}`,className:"px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md border border-red-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px] min-w-[44px]",children:t?"Deleting...":"Delete"})})]})}const mn=b.memo(vn);function bn({adventures:e,isLoading:t=!1,error:r=null,onSelectAdventure:n,onDeleteAdventure:a}){return t?h.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4","aria-busy":"true","aria-label":"Loading adventures",children:h.jsx(Gr,{count:6,variant:"card"})}):r?h.jsx("div",{className:"text-center py-12",children:h.jsxs("div",{className:"inline-block p-6 bg-red-50 border border-red-200 rounded-lg",children:[h.jsx("h2",{className:"text-xl font-bold text-red-700 mb-2",children:"Failed to load adventures"}),h.jsx("p",{className:"text-red-600 mb-4",children:r.message||"An unexpected error occurred"}),h.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Retry"})]})}):e.length===0?h.jsx("div",{className:"text-center py-12",children:h.jsxs("div",{className:"inline-block p-8 bg-white border border-gray-200 rounded-lg shadow-sm",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“–"}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Adventures Yet"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first adventure to begin exploring!"})]})}):h.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",role:"list","aria-label":"Adventures list",children:e.map(s=>h.jsx(mn,{adventure:s,onSelect:n,onDelete:a},s.id))})}const pn=b.memo(bn);function gn(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge.apply(null,arguments)}var et="data-focus-lock",Xt="data-focus-lock-disabled",yn="data-no-focus-lock",xn="data-autofocus-inside",wn="data-no-autofocus";function Ue(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function En(e,t){var r=b.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var Sn=typeof window<"u"?b.useLayoutEffect:b.useEffect,Lt=new WeakMap;function Cn(e,t){var r=En(null,function(n){return e.forEach(function(a){return Ue(a,n)})});return Sn(function(){var n=Lt.get(r);if(n){var a=new Set(n),s=new Set(e),i=r.current;a.forEach(function(u){s.has(u)||Ue(u,null)}),s.forEach(function(u){a.has(u)||Ue(u,i)})}Lt.set(r,e)},[e]),r}var Be={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},tt=function(){return tt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},tt.apply(this,arguments)};function Zt(e){return e}function er(e,t){t===void 0&&(t=Zt);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var i=t(s,n);return r.push(i),function(){r=r.filter(function(u){return u!==i})}},assignSyncMedium:function(s){for(n=!0;r.length;){var i=r;r=[],i.forEach(s)}r={push:function(u){return s(u)},filter:function(){return r}}},assignMedium:function(s){n=!0;var i=[];if(r.length){var u=r;r=[],u.forEach(s),i=r}var v=function(){var m=i;i=[],m.forEach(s)},d=function(){return Promise.resolve().then(v)};d(),r={push:function(m){i.push(m),d()},filter:function(m){return i=i.filter(m),r}}}};return a}function lt(e,t){return t===void 0&&(t=Zt),er(e,t)}function On(e){e===void 0&&(e={});var t=er(null);return t.options=tt({async:!0,ssr:!1},e),t}var tr=lt({},function(e){var t=e.target,r=e.currentTarget;return{target:t,currentTarget:r}}),rr=lt(),Fn=lt(),In=On({async:!0,ssr:typeof document<"u"}),Nn=b.createContext(void 0),Rn=[],dt=b.forwardRef(function(t,r){var n,a=b.useState(),s=a[0],i=a[1],u=b.useRef(),v=b.useRef(!1),d=b.useRef(null),m=b.useState({}),c=m[1],l=t.children,f=t.disabled,p=f===void 0?!1:f,y=t.noFocusGuards,x=y===void 0?!1:y,I=t.persistentFocus,C=I===void 0?!1:I,O=t.crossFrame,N=O===void 0?!0:O,k=t.autoFocus,L=k===void 0?!0:k;t.allowTextSelection;var he=t.group,M=t.className,Oe=t.whiteList,P=t.hasPositiveIndices,G=t.shards,K=G===void 0?Rn:G,ve=t.as,ne=ve===void 0?"div":ve,Y=t.lockProps,Fr=Y===void 0?{}:Y,Ir=t.sideCar,Ct=t.returnFocus,Fe=Ct===void 0?!1:Ct,Nr=t.focusOptions,ke=t.onActivation,Me=t.onDeactivation,Rr=b.useState({}),Pr=Rr[0],Ar=b.useCallback(function(U){var ae=U.captureFocusRestore;if(!d.current){var se,J=(se=document)==null?void 0:se.activeElement;d.current=J,J!==document.body&&(d.current=ae(J))}u.current&&ke&&ke(u.current),v.current=!0,c()},[ke]),jr=b.useCallback(function(){v.current=!1,Me&&Me(u.current),c()},[Me]),Tr=b.useCallback(function(U){var ae=d.current;if(ae){var se=(typeof ae=="function"?ae():ae)||document.body,J=typeof Fe=="function"?Fe(se):Fe;if(J){var Ft=typeof J=="object"?J:void 0;d.current=null,U?Promise.resolve().then(function(){return se.focus(Ft)}):se.focus(Ft)}}},[Fe]),kr=b.useCallback(function(U){v.current&&tr.useMedium(U)},[]),Mr=rr.useMedium,Dr=b.useCallback(function(U){u.current!==U&&(u.current=U,i(U))},[]),_r=ge((n={},n[Xt]=p&&"disabled",n[et]=he,n),Fr),Ot=x!==!0,Lr=Ot&&x!=="tail",Ur=Cn([r,Dr]),Br=b.useMemo(function(){return{observed:u,shards:K,enabled:!p,get active(){return v.current}}},[p,v,K,u]);return B.createElement(b.Fragment,null,Ot&&[B.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:Be}),P?B.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:Be}):null],!p&&B.createElement(Ir,{id:Pr,sideCar:In,observed:s,disabled:p,persistentFocus:C,crossFrame:N,autoFocus:L,whiteList:Oe,shards:K,onActivation:Ar,onDeactivation:jr,returnFocus:Tr,focusOptions:Nr,noFocusGuards:x}),B.createElement(ne,ge({ref:Ur},_r,{className:M,onBlur:Mr,onFocus:kr}),B.createElement(Nn.Provider,{value:Br},l)),Lr&&B.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:Be}))});dt.propTypes={};function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},rt(e,t)}function Pn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,rt(e,t)}function ye(e){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(e)}function An(e,t){if(ye(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ye(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jn(e){var t=An(e,"string");return ye(t)=="symbol"?t:t+""}function Tn(e,t,r){return(t=jn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kn(e,t){function r(n){return n.displayName||n.name||"Component"}return function(a){var s=[],i;function u(){i=e(s.map(function(d){return d.props})),t(i)}var v=function(d){Pn(m,d);function m(){return d.apply(this,arguments)||this}m.peek=function(){return i};var c=m.prototype;return c.componentDidMount=function(){s.push(this),u()},c.componentDidUpdate=function(){u()},c.componentWillUnmount=function(){var f=s.indexOf(this);s.splice(f,1),u()},c.render=function(){return B.createElement(a,this.props)},m}(b.PureComponent);return Tn(v,"displayName","SideEffect("+r(a)+")"),v}}var _=function(e){for(var t=Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t},re=function(e){return Array.isArray(e)?e:[e]},nr=function(e){return Array.isArray(e)?e[0]:e},Mn=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},ar=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},sr=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},Dn=function(e){return e.hasAttribute("inert")},_n=function(e,t){return!e||sr(e)||!Mn(e)&&!Dn(e)&&t(ar(e))},ir=function(e,t){var r=e.get(t);if(r!==void 0)return r;var n=_n(t,ir.bind(void 0,e));return e.set(t,n),n},Ln=function(e,t){return e&&!sr(e)?Wn(e)?t(ar(e)):!1:!0},or=function(e,t){var r=e.get(t);if(r!==void 0)return r;var n=Ln(t,or.bind(void 0,e));return e.set(t,n),n},ur=function(e){return e.dataset},Un=function(e){return e.tagName==="BUTTON"},cr=function(e){return e.tagName==="INPUT"},lr=function(e){return cr(e)&&e.type==="radio"},Bn=function(e){return!((cr(e)||Un(e))&&(e.type==="hidden"||e.disabled))},Wn=function(e){var t=e.getAttribute(wn);return![!0,"true",""].includes(t)},ft=function(e){var t;return!!(e&&(!((t=ur(e))===null||t===void 0)&&t.focusGuard))},nt=function(e){return!ft(e)},$n=function(e){return!!e},Qn=function(e,t){var r=Math.max(0,e.tabIndex),n=Math.max(0,t.tabIndex),a=r-n,s=e.index-t.index;if(a){if(!r)return 1;if(!n)return-1}return a||s},Hn=function(e){return e.tabIndex<0&&!e.hasAttribute("tabindex")?0:e.tabIndex},ht=function(e,t,r){return _(e).map(function(n,a){var s=Hn(n);return{node:n,index:a,tabIndex:r&&s===-1?(n.dataset||{}).focusGuard?0:-1:s}}).filter(function(n){return!t||n.tabIndex>=0}).sort(Qn)},Gn=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],vt=Gn.join(","),Kn="".concat(vt,", [data-focus-guard]"),dr=function(e,t){return _((e.shadowRoot||e).children).reduce(function(r,n){return r.concat(n.matches(t?Kn:vt)?[n]:[],dr(n))},[])},Vn=function(e,t){var r;return e instanceof HTMLIFrameElement&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?fe([e.contentDocument.body],t):[e]},fe=function(e,t){return e.reduce(function(r,n){var a,s=dr(n,t),i=(a=[]).concat.apply(a,s.map(function(u){return Vn(u,t)}));return r.concat(i,n.parentNode?_(n.parentNode.querySelectorAll(vt)).filter(function(u){return u===n}):[])},[])},zn=function(e){var t=e.querySelectorAll("[".concat(xn,"]"));return _(t).map(function(r){return fe([r])}).reduce(function(r,n){return r.concat(n)},[])},mt=function(e,t){return _(e).filter(function(r){return ir(t,r)}).filter(function(r){return Bn(r)})},Ut=function(e,t){return t===void 0&&(t=new Map),_(e).filter(function(r){return or(t,r)})},bt=function(e,t,r){return ht(mt(fe(e,r),t),!0,r)},xe=function(e,t){return ht(mt(fe(e),t),!1)},qn=function(e,t){return mt(zn(e),t)},te=function(e,t){return e.shadowRoot?te(e.shadowRoot,t):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,t)?!0:_(e.children).some(function(r){var n;if(r instanceof HTMLIFrameElement){var a=(n=r.contentDocument)===null||n===void 0?void 0:n.body;return a?te(a,t):!1}return te(r,t)})},Yn=function(e){for(var t=new Set,r=e.length,n=0;n<r;n+=1)for(var a=n+1;a<r;a+=1){var s=e[n].compareDocumentPosition(e[a]);(s&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(a),(s&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return e.filter(function(i,u){return!t.has(u)})},fr=function(e){return e.parentNode?fr(e.parentNode):e},pt=function(e){var t=re(e);return t.filter(Boolean).reduce(function(r,n){var a=n.getAttribute(et);return r.push.apply(r,a?Yn(_(fr(n).querySelectorAll("[".concat(et,'="').concat(a,'"]:not([').concat(Xt,'="disabled"])')))):[n]),r},[])},Jn=function(e){try{return e()}catch{return}},we=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var t=e.activeElement;return t.shadowRoot?we(t.shadowRoot):t instanceof HTMLIFrameElement&&Jn(function(){return t.contentWindow.document})?we(t.contentWindow.document):t}},Xn=function(e,t){return e===t},Zn=function(e,t){return!!_(e.querySelectorAll("iframe")).some(function(r){return Xn(r,t)})},hr=function(e,t){return t===void 0&&(t=we(nr(e).ownerDocument)),!t||t.dataset&&t.dataset.focusGuard?!1:pt(e).some(function(r){return te(r,t)||Zn(r,t)})},ea=function(e){e===void 0&&(e=document);var t=we(e);return t?_(e.querySelectorAll("[".concat(yn,"]"))).some(function(r){return te(r,t)}):!1},ta=function(e,t){return t.filter(lr).filter(function(r){return r.name===e.name}).filter(function(r){return r.checked})[0]||e},gt=function(e,t){return lr(e)&&e.name?ta(e,t):e},ra=function(e){var t=new Set;return e.forEach(function(r){return t.add(gt(r,e))}),e.filter(function(r){return t.has(r)})},Bt=function(e){return e[0]&&e.length>1?gt(e[0],e):e[0]},Wt=function(e,t){return e.indexOf(gt(t,e))},at="NEW_FOCUS",na=function(e,t,r,n,a){var s=e.length,i=e[0],u=e[s-1],v=ft(n);if(!(n&&e.indexOf(n)>=0)){var d=n!==void 0?r.indexOf(n):-1,m=a?r.indexOf(a):d,c=a?e.indexOf(a):-1;if(d===-1)return c!==-1?c:at;if(c===-1)return at;var l=d-m,f=r.indexOf(i),p=r.indexOf(u),y=ra(r),x=n!==void 0?y.indexOf(n):-1,I=a?y.indexOf(a):x,C=y.filter(function(M){return M.tabIndex>=0}),O=n!==void 0?C.indexOf(n):-1,N=a?C.indexOf(a):O,k=O>=0&&N>=0?N-O:I-x;if(!l&&c>=0||t.length===0)return c;var L=Wt(e,t[0]),he=Wt(e,t[t.length-1]);if(d<=f&&v&&Math.abs(l)>1)return he;if(d>=p&&v&&Math.abs(l)>1)return L;if(l&&Math.abs(k)>1)return c;if(d<=f)return he;if(d>p)return L;if(l)return Math.abs(l)>1?c:(s+c+l)%s}},aa=function(e){return function(t){var r,n=(r=ur(t))===null||r===void 0?void 0:r.autofocus;return t.autofocus||n!==void 0&&n!=="false"||e.indexOf(t)>=0}},$t=function(e,t,r){var n=e.map(function(s){var i=s.node;return i}),a=Ut(n.filter(aa(r)));return a&&a.length?Bt(a):Bt(Ut(t))},st=function(e,t){return t===void 0&&(t=[]),t.push(e),e.parentNode&&st(e.parentNode.host||e.parentNode,t),t},We=function(e,t){for(var r=st(e),n=st(t),a=0;a<r.length;a+=1){var s=r[a];if(n.indexOf(s)>=0)return s}return!1},vr=function(e,t,r){var n=re(e),a=re(t),s=n[0],i=!1;return a.filter(Boolean).forEach(function(u){i=We(i||u,u)||i,r.filter(Boolean).forEach(function(v){var d=We(s,v);d&&(!i||te(d,i)?i=d:i=We(d,i))})}),i},Qt=function(e,t){return e.reduce(function(r,n){return r.concat(qn(n,t))},[])},sa=function(e,t){var r=new Map;return t.forEach(function(n){return r.set(n.node,n)}),e.map(function(n){return r.get(n)}).filter($n)},ia=function(e,t){var r=we(re(e).length>0?document:nr(e).ownerDocument),n=pt(e).filter(nt),a=vr(r||e,e,n),s=new Map,i=xe(n,s),u=i.filter(function(p){var y=p.node;return nt(y)});if(u[0]){var v=xe([a],s).map(function(p){var y=p.node;return y}),d=sa(v,u),m=d.map(function(p){var y=p.node;return y}),c=d.filter(function(p){var y=p.tabIndex;return y>=0}).map(function(p){var y=p.node;return y}),l=na(m,c,v,r,t);if(l===at){var f=$t(i,c,Qt(n,s))||$t(i,m,Qt(n,s));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return l===void 0?l:d[l]}},oa=function(e){var t=pt(e).filter(nt),r=vr(e,e,t),n=ht(fe([r],!0),!0,!0),a=fe(t,!1);return n.map(function(s){var i=s.node,u=s.index;return{node:i,index:u,lockItem:a.indexOf(i)>=0,guard:ft(i)}})},yt=function(e,t){e&&("focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus())},$e=0,Qe=!1,mr=function(e,t,r){r===void 0&&(r={});var n=ia(e,t);if(!Qe&&n){if($e>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),Qe=!0,setTimeout(function(){Qe=!1},1);return}$e++,yt(n.node,r.focusOptions),$e--}};function me(e){if(!e)return null;if(typeof WeakRef>"u")return function(){return e||null};var t=e?new WeakRef(e):null;return function(){return(t==null?void 0:t.deref())||null}}var ua=function(e){if(!e)return null;for(var t=[],r=e;r&&r!==document.body;)t.push({current:me(r),parent:me(r.parentElement),left:me(r.previousElementSibling),right:me(r.nextElementSibling)}),r=r.parentElement;return{element:me(e),stack:t,ownerDocument:e.ownerDocument}},ca=function(e){var t,r,n,a,s;if(e)for(var i=e.stack,u=e.ownerDocument,v=new Map,d=0,m=i;d<m.length;d++){var c=m[d],l=(t=c.parent)===null||t===void 0?void 0:t.call(c);if(l&&u.contains(l)){for(var f=(r=c.left)===null||r===void 0?void 0:r.call(c),p=c.current(),y=l.contains(p)?p:void 0,x=(n=c.right)===null||n===void 0?void 0:n.call(c),I=bt([l],v),C=(s=(a=y??(f==null?void 0:f.nextElementSibling))!==null&&a!==void 0?a:x)!==null&&s!==void 0?s:f;C;){for(var O=0,N=I;O<N.length;O++){var k=N[O];if(C!=null&&C.contains(k.node))return k.node}C=C.nextElementSibling}if(I.length)return I[0].node}}},br=function(e){var t=ua(e);return function(){return ca(t)}},la=function(e,t,r){if(!e||!t)return console.error("no element or scope given"),{};var n=re(t);if(n.every(function(i){return!te(i,e)}))return console.error("Active element is not contained in the scope"),{};var a=r?bt(n,new Map):xe(n,new Map),s=a.findIndex(function(i){var u=i.node;return u===e});if(s!==-1)return{prev:a[s-1],next:a[s+1],first:a[0],last:a[a.length-1]}},da=function(e,t){var r=t?bt(re(e),new Map):xe(re(e),new Map);return{first:r[0],last:r[r.length-1]}},fa=function(e){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},e)},pr=function(e,t,r){t===void 0&&(t={});var n=fa(t),a=la(e,n.scope,n.onlyTabbable);if(a){var s=r(a,n.cycle);s&&yt(s.node,n.focusOptions)}},ha=function(e,t){t===void 0&&(t={}),pr(e,t,function(r,n){var a=r.next,s=r.first;return a||n&&s})},va=function(e,t){t===void 0&&(t={}),pr(e,t,function(r,n){var a=r.prev,s=r.last;return a||n&&s})},gr=function(e,t,r){var n,a=da(e,(n=t.onlyTabbable)!==null&&n!==void 0?n:!0),s=a[r];s&&yt(s.node,t.focusOptions)},ma=function(e,t){t===void 0&&(t={}),gr(e,t,"first")},ba=function(e,t){t===void 0&&(t={}),gr(e,t,"last")};function xt(e){setTimeout(e,1)}var pa=function(t){return t&&"current"in t?t.current:t},yr=function(){return document&&document.activeElement===document.body},ga=function(){return yr()||ea()},ie=null,A=null,Ht=function(){return null},oe=null,Ee=!1,wt=!1,ya=function(){return!0},xa=function(t){return(ie.whiteList||ya)(t)},wa=function(t,r){oe={observerNode:t,portaledElement:r}},Ea=function(t){return oe&&oe.portaledElement===t};function Gt(e,t,r,n){var a=null,s=e;do{var i=n[s];if(i.guard)i.node.dataset.focusAutoGuard&&(a=i);else if(i.lockItem){if(s!==e)return;a=null}else break}while((s+=r)!==t);a&&(a.node.tabIndex=0)}var Sa=function(t){return t?!!Ee:Ee==="meanwhile"},Ca=function e(t,r,n){return r&&(r.host===t&&(!r.activeElement||n.contains(r.activeElement))||r.parentNode&&e(t,r.parentNode,n))},Oa=function(t,r){return r.some(function(n){return Ca(t,n,n)})},xr=function(t){return xe(t,new Map)},Fa=function(t){return!xr([t.parentNode]).some(function(r){return r.node===t})},Ae=function(){var t=!1;if(ie){var r=ie,n=r.observed,a=r.persistentFocus,s=r.autoFocus,i=r.shards,u=r.crossFrame,v=r.focusOptions,d=r.noFocusGuards,m=n||oe&&oe.portaledElement;if(yr()&&A&&A!==document.body&&(!document.body.contains(A)||Fa(A))){var c=Ht();c&&c.focus()}var l=document&&document.activeElement;if(m){var f=[m].concat(i.map(pa).filter(Boolean)),p=function(){if(!Sa(u)||!d||!A||wt)return!1;var O=xr(f),N=O.findIndex(function(k){var L=k.node;return L===A});return N===0||N===O.length-1};if((!l||xa(l))&&(a||p()||!ga()||!A&&s)&&(m&&!(hr(f)||l&&Oa(l,f)||Ea(l))&&(document&&!A&&l&&!s?(l.blur&&l.blur(),document.body.focus()):(t=mr(f,A,{focusOptions:v}),oe={})),A=document&&document.activeElement,A!==document.body&&(Ht=br(A)),Ee=!1),document&&l!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var y=document&&document.activeElement,x=oa(f),I=x.map(function(C){var O=C.node;return O}).indexOf(y);I>-1&&(x.filter(function(C){var O=C.guard,N=C.node;return O&&N.dataset.focusAutoGuard}).forEach(function(C){var O=C.node;return O.removeAttribute("tabIndex")}),Gt(I,x.length,1,x),Gt(I,-1,-1,x))}}}return t},wr=function(t){Ae()&&t&&(t.stopPropagation(),t.preventDefault())},Et=function(){return xt(Ae)},Ia=function(t){var r=t.target,n=t.currentTarget;n.contains(r)||wa(n,r)},Na=function(){return null},Er=function(){wt=!0},Sr=function(){wt=!1,Ee="just",xt(function(){Ee="meanwhile"})},Ra=function(){document.addEventListener("focusin",wr),document.addEventListener("focusout",Et),window.addEventListener("focus",Er),window.addEventListener("blur",Sr)},Pa=function(){document.removeEventListener("focusin",wr),document.removeEventListener("focusout",Et),window.removeEventListener("focus",Er),window.removeEventListener("blur",Sr)};function Aa(e){return e.filter(function(t){var r=t.disabled;return!r})}var Cr={moveFocusInside:mr,focusInside:hr,focusNextElement:ha,focusPrevElement:va,focusFirstElement:ma,focusLastElement:ba,captureFocusRestore:br};function ja(e){var t=e.slice(-1)[0];t&&!ie&&Ra();var r=ie,n=r&&t&&t.id===r.id;ie=t,r&&!n&&(r.onDeactivation(),e.filter(function(a){var s=a.id;return s===r.id}).length||r.returnFocus(!t)),t?(A=null,(!n||r.observed!==t.observed)&&t.onActivation(Cr),Ae(),xt(Ae)):(Pa(),A=null)}tr.assignSyncMedium(Ia);rr.assignMedium(Et);Fn.assignMedium(function(e){return e(Cr)});const Ta=kn(Aa,ja)(Na);var St=b.forwardRef(function(t,r){return B.createElement(dt,ge({sideCar:Ta,ref:r},t))}),Or=dt.propTypes||{};Or.sideCar;gn(Or,["sideCar"]);St.propTypes={};function ka({isOpen:e,onClose:t}){const r=b.useId(),n=b.useRef(null),[a,s]=b.useState(null),[i,u]=b.useState(""),v=fn(),d=async c=>{var f,p;c.preventDefault(),s(null);const l=i.trim();if(!l){s("Adventure name is required"),(f=n.current)==null||f.focus();return}if(l.length>100){s("Name must be 100 characters or less"),(p=n.current)==null||p.focus();return}try{await v.mutateAsync({}),u(""),s(null),t()}catch(y){const x=await ct(y);s(x)}},m=()=>{u(""),s(null),t()};return e?h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:m,children:h.jsx(St,{children:h.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":`${r}-title`,className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",onClick:c=>c.stopPropagation(),children:[h.jsx("h2",{id:`${r}-title`,className:"text-2xl font-bold text-gray-900 mb-4",children:"Create New Adventure"}),h.jsxs("form",{onSubmit:d,children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-2",children:"Adventure Name"}),h.jsx("input",{id:r,ref:n,type:"text",value:i,onChange:c=>u(c.target.value),maxLength:100,autoFocus:!0,"aria-invalid":!!a,"aria-describedby":a?`${r}-error`:void 0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter adventure name..."}),a&&h.jsx("p",{id:`${r}-error`,className:"text-red-600 text-sm mt-1",role:"alert",children:a}),h.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[i.length,"/100 characters"]})]}),h.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[h.jsx("button",{type:"button",onClick:m,disabled:v.isPending,className:"btn-secondary min-h-[44px]",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:v.isPending||!i.trim(),className:"btn-primary min-h-[44px]",children:v.isPending?"Creating...":"Create Adventure"})]})]})]})})}):null}function Ma({isOpen:e,title:t,message:r,confirmText:n="Confirm",cancelText:a="Cancel",isDangerous:s=!1,isLoading:i,onConfirm:u,onCancel:v}){const d=b.useId(),m=b.useId(),c=b.useRef(null);return b.useEffect(()=>{var l;e&&((l=c.current)==null||l.focus())},[e]),b.useEffect(()=>{const l=f=>{f.key==="Escape"&&e&&v()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[e,v]),e?h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:v,children:h.jsx(St,{children:h.jsxs("div",{role:"alertdialog","aria-modal":"true","aria-labelledby":d,"aria-describedby":m,className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",onClick:l=>l.stopPropagation(),children:[h.jsx("h2",{id:d,className:"text-2xl font-bold text-gray-900 mb-4",children:t}),h.jsx("p",{id:m,className:"text-gray-600 mb-6",children:r}),h.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[h.jsx("button",{ref:c,type:"button",onClick:v,disabled:i,className:"btn-secondary min-h-[44px]",children:a}),h.jsx("button",{type:"button",onClick:u,disabled:i,className:`min-h-[44px] ${s?"btn-danger":"btn-primary"}`,children:i?"Processing...":n})]})]})})}):null}function La(){const e=Kr(),[t,r]=b.useState(!1),[n,a]=b.useState(null),{data:s=[],isLoading:i,error:u}=dn(),v=hn(),d=b.useCallback(l=>{e(`/game/${l.id}`)},[e]),m=b.useCallback(l=>{const f=s.find(p=>p.id===l);f&&f.id&&a({id:f.id,name:f.name||`Adventure ${l.substring(0,8)}`})},[s]),c=b.useCallback(async()=>{if(n)try{await v.mutateAsync(n.id),a(null)}catch(l){console.error("Delete failed:",l)}},[n,v]);return h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Adventures"}),h.jsx("button",{className:"btn-primary",onClick:()=>r(!0),children:"Create Adventure"})]}),h.jsx(pn,{adventures:s,isLoading:i,error:u,onSelectAdventure:d,onDeleteAdventure:m}),h.jsx(ka,{isOpen:t,onClose:()=>r(!1)}),h.jsx(Ma,{isOpen:n!==null,title:"Delete Adventure",message:`Are you sure you want to delete "${n==null?void 0:n.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",isDangerous:!0,isLoading:v.isPending,onConfirm:c,onCancel:()=>a(null)})]})}export{La as default};
